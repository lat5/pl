<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Плагины Lampa</title>
    <script>
        function copyToClipboard(url) {
            var textField = document.createElement('textarea');
            textField.innerText = url;
            document.body.appendChild(textField);
            textField.select();
            document.execCommand('copy');
            textField.remove();
            alert('Ссылка скопирована: ' + url);
        }

        // Функция для загрузки данных из файла plugins.txt и создания таблицы
        function loadPlugins() {
            // Создание нового XMLHttpRequest объекта
            var xhr = new XMLHttpRequest();

            // Открытие файла plugins.txt для чтения
            xhr.open('GET', 'plugins.txt', true);

            // Определение функции, которая будет вызвана при завершении запроса
            xhr.onload = function() {
                // Проверка статуса запроса
                if (xhr.status >= 200 && xhr.status < 300) {
                    // Разбиение полученного содержимого файла по строкам
                    var lines = xhr.responseText.split('\n');

                    // Получение элемента таблицы для вставки данных
                    var tableBody = document.getElementById('pluginTableBody');

                    // Обход каждой строки и создание новой строки в таблице для каждого плагина
                    lines.forEach(function(line) {
                        var parts = line.split(' - ');
                        var name = parts[0].trim();
                        var url = parts[1].trim();
                        var row = '<tr><td>' + name + '</td><td><button onclick="copyToClipboard(\'' + url + '\')">Копировать ссылку</button></td><td><a href="' + url + '">' + url + '</a></td></tr>';
                        tableBody.innerHTML += row;
                    });
                } else {
                    console.error(xhr.statusText);
                }
            };

            // Отправка запроса
            xhr.send();
        }

        // Вызов функции загрузки данных при загрузке страницы
        window.onload = loadPlugins;
    </script>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>

<table>
    <tr>
        <th>Название</th>
        <th>Скопировать</th>
        <th>Ссылка</th>
    </tr>
    <tbody id="pluginTableBody"></tbody>
</table>

</body>
</html>
